[build-system]
requires = [ "setuptools>=61.0", "wheel",]
build-backend = "setuptools.build_meta"

[project]
name = "med13-resource-library"
version = "0.1.0"
description = "MED13 Resource Library - Curated biomedical data for research"
readme = "README.md"
requires-python = ">=3.12"
dependencies = [ "fastapi>=0.115.0", "uvicorn[standard]>=0.30.0", "pydantic>=2.8.0", "pydantic-settings>=2.3.0", "sqlalchemy>=2.0.0", "psycopg2-binary>=2.9.0", "asyncpg>=0.29.0", "alembic>=1.13.0", "google-cloud-secretmanager>=2.16.0", "google-cloud-storage>=2.10.0", "httpx>=0.27.0", "pandas>=2.2.0", "numpy>=1.26.0", "plotly>=5.17.0", "dash>=2.17.0", "dash-bootstrap-components>=1.6.0", "gradio>=4.44.1",]
[[project.authors]]
name = "MED13 Foundation"

[project.optional-dependencies]
dev = [ "pytest>=8.0.0", "pytest-asyncio>=0.23.0", "pytest-cov>=5.0.0", "black>=24.0.0", "flake8>=7.0.0", "mypy>=1.8.0", "pre-commit>=3.7.0", "pip-audit>=2.7.0", "bandit>=1.8.0", "safety>=3.0.0", "pytest-watch>=4.2.0", "pytest-xdist>=3.6.0",]

[tool.black]
line-length = 88
target-version = [ "py312",]
include = "\\.pyi?$"
extend-exclude = "/(\n  # directories\n  \\.eggs\n  | \\.git\n  | \\.hg\n  | \\.mypy_cache\n  | \\.tox\n  | \\.venv\n  | _build\n  | buck-out\n  | build\n  | dist\n)/\n"

[tool.mypy]
python_version = "3.12"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = true
disallow_incomplete_defs = true
check_untyped_defs = true
disallow_untyped_decorators = true
no_implicit_optional = true
warn_redundant_casts = true
warn_unused_ignores = true
warn_no_return = true
warn_unreachable = true
strict_equality = true
show_error_codes = true
disallow_any_generics = true
disallow_any_unimported = true
disallow_any_expr = false
[[tool.mypy.overrides]]
module = [ "alembic.*", "plotly.*", "dash.*", "dash_bootstrap_components.*", "requests.*", "requests", "dash_table", "dash_table.*",]
ignore_missing_imports = true

[[tool.mypy.overrides]]
module = [ "src.presentation.dash.*", "src.dash_app",]
disallow_any_generics = false
disallow_any_unimported = false
ignore_errors = true

[[tool.mypy.overrides]]
module = [ "src.type_definitions.json_utils", "src.application.packaging.*",]
disallow_any_expr = false

[[tool.mypy.overrides]]
module = [ "src.domain.events.*", "src.domain.entities.*", "src.type_definitions.domain",]
disallow_any_expr = true


[tool.flake8]
max-line-length = 88
extend-ignore = [ "E203", "W503", "E501",]
exclude = [ ".git", "__pycache__", "build", "dist", "*.egg-info", ".venv", ".tox", "migrations", "src/web/node_modules",]

[tool.ruff]
line-length = 88
target-version = "py312"

[tool.bandit]
exclude_dirs = [ "tests", "migrations", ".venv",]
skips = [ "B101", "B601",]

[tool.safety]
ignore-vulns = []

[tool.ruff.lint]
select = [ "E", "F", "W", "C90", "I", "N", "UP", "YTT", "S", "BLE", "FBT", "B", "A", "COM", "C4", "DTZ", "T10", "DJ", "EM", "EXE", "FA", "ISC", "ICN", "G", "INP", "PIE", "T20", "PYI", "PT", "Q", "RSE", "RET", "SLF", "SLOT", "SIM", "TID", "TCH", "INT", "ARG", "PTH", "ERA", "PD", "PGH", "PL", "TRY", "FLY", "NPY", "AIR", "PERF", "FURB", "LOG",]
ignore = [ "E203", "E501", "W291", "W292", "W293",]

[tool.safety.scan]

[tool.pytest.ini_options]
minversion = "7.0"
addopts = "-ra -q --strict-markers --strict-config"
testpaths = [ "tests",]
python_files = [ "test_*.py", "*_test.py",]
python_classes = [ "Test*",]
python_functions = [ "test_*",]
markers = [ "unit: Unit tests", "integration: Integration tests", "slow: Slow running tests", "api: API endpoint tests", "database: Database tests",]

[tool.coverage.run]
source = [ "src",]
omit = [ "*/tests/*", "*/test_*.py", "src/main.py",]

[tool.coverage.report]
exclude_lines = [ "pragma: no cover", "def __repr__", "if self.debug:", "if settings.DEBUG", "raise AssertionError", "raise NotImplementedError", "if 0:", "if __name__ == .__main__.:", "class .*\\bProtocol\\):", "@(abc\\.)?abstractmethod",]

[tool.ruff.lint.per-file-ignores]
"src/web/**" = [ "T20", "ARG", "ERA",]
"scripts/**" = [ "E402", "S107", "TRY400", "PLC0415", "BLE001", "C901", "PLR0911",]
"tests/**" = [ "S101", "ARG", "ERA", "PLR2004", "SLF001", "E402", "S106", "PT011", "B017", "N806", "PLC0415", "PTH123", "EM102", "TRY003", "S105", "INP001", "B007", "PERF102", "RET504", "PTH110", "SIM222", "PLR0913", "PT003", "TRY002", "BLE001", "B023",]
"src/dash_app.py" = [ "ARG001", "PLR0913", "PLR0912", "C901", "TRY300", "TRY401", "TRY400", "G004", "BLE001", "PLC0415", "PLW0603",]
"src/routes/**" = [ "B008", "BLE001", "B904", "TRY300", "RET504", "ARG001", "PLR0913", "FBT001", "FBT003", "TRY301", "SLF001", "C901", "S106", "TC001", "TC002", "TC003",]
"src/domain/transform/**" = [ "TID252", "C901", "PLR0911", "PLR0912", "PLR2004", "BLE001", "T201", "ERA001", "TRY003", "EM101", "EM102", "SIM102", "PLC0415", "PERF401", "ARG002", "RET504", "SIM105", "DTZ007", "DTZ001", "N817", "PLC0105", "FBT001", "FBT002", "TRY300", "TRY400", "G004", "SLF001", "TC003", "PLC0206",]
"src/domain/validation/**" = [ "TID", "TC001", "TC002", "TC003", "C901", "FBT001", "FBT002", "PERF401", "SIM118", "A002", "UP007", "PLR0913", "PLR2004", "TRY003", "EM102", "SLF001", "PLC0415", "PLR0912",]
"src/presentation/dash/**" = [ "ARG", "ERA", "INP001", "PLR0911", "PLR0912", "PERF401", "PGH003", "FBT001", "FBT002", "G004", "TRY003", "TRY004", "EM101", "EM102", "TC002",]
"src/repositories/**" = [ "TRY003", "EM101", "EM102", "DTZ003", "RET504", "A002", "TRY300", "B904",]
